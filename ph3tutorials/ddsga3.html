<!DOCTYPE html><html lang="en-us">  <head>    <meta charset="utf-8">    <title>Sparen's Danmaku Design Studio - Guide A3</title>    <link rel="stylesheet" type="text/css" href="../blah.css">
    <link rel="stylesheet" type="text/css" href="docs.css">    <meta content="Sparen's Danmaku Design Studio - Guide A3 - The Ring, The Spread, and The Stack - Combinations with You. A guide covering bullet groups and subpatterns, including rings, spreads, and stacks."      name="description">
    <meta name="keywords" content="Sparen, Danmaku, Design, Theory, Studio, Group, Subpattern, Ring, Spread, Stack">
    <meta name="viewport" content="width=device-width, initial-scale=1">
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-58194930-1', 'auto');
    ga('send', 'pageview');
  </script>  </head>  <body onload="setupENG('Dec 04, 2019')">    <div id="top">      <p style="text-align: center;"><a href="https://sparen.github.io"><img alt="Site Logo" src="../images/logo.png" style="width:100%;max-width:1000px"></a></p>      <br>
      <div id="menubar">
        <ul>
          <li><a href="https://sparen.github.io" title="AFCDTech">Home</a></li>
          <li><a href="./danmakudesign.html" title="Sparen's Danmaku Design Studio">Danmaku Design</a></li>
        </ul>
      </div>      <div id="pagecontentwrapper">
          <div id="pagecontent">
              <div class="tutnavbar">
	        <ul>
	          <li><a href="./ddsga2.html" title="Danmaku and the Player - Aesthetics and Gameplay">Guide A2</a></li>
	          <li><span>Navigation Bar</span></li>
	          <li><span>---</span></li>
	        </ul>
              </div>	      <h1 class="toplevelheadera">Sparen's Danmaku Design Studio - Guide A3 - The Ring, The Spread, and The Stack - Combinations with You</h1>
	      <div class="tutorialnav">
	        <h2 class="tocheader">Table of Contents</h2>
	        <ul>
	          <li><a href="#sub1">Part 1: Guide Introduction</a></li>
	          <li><a href="#sub2">Part 2: Groups and Subpatterns</a></li>
	          <li><a href="#sub3">Part 3: Rings and their usage</a></li>
	          <li><a href="#sub4">Part 4: Bullet Spreads and Walls</a></li>
	          <li><a href="#sub5">Part 5: Stacks and their usage</a></li>
	          <li><a href="#subf">Sources and External Resources</a></li>
	        </ul>
	      </div>	      <h2 class="ph3tutorialheader" id="sub1">Part 1: Guide Introduction</h2>
	      <p>In the previous guide, we covered angles, bullet graphics, and the concept of bullets that add aesthetic value to a pattern while not directly impacting how the pattern is played. In this guide we will dive deep into Bullet Groups and Subpatterns, and will cover three common Bullet Groups and some of the ways in which they can be used. These are Rings, Spreads, and Stacks, and while they may seem boring at first glance, they are important building blocks for more complex patterns that require significant time for mastery.</p>
	      <p>From here on out, a major goal will be to not only break down patterns into their component parts but also to provide numerous techniques and concepts that can be melded together or expanded upon in order to create new, original patterns as well as patterns that make effective use of the fundamentals. It is therefore of the utmost importance that you as the reader have at least some experience with a danmaku engine so that you can experiment and brainstorm.</p>
	      <h2 class="ph3tutorialheader" id="sub2">Part 2: Groups and Subpatterns</h2>
	      <p>In our <a href="./ddsg0.html">Guide 0</a>, we gave a brief introduction to Patterns, Subpatterns, and Groups. With the Pattern being the all-encompassing term for a complete danmaku animation over a specified period of time, we used the term Subpattern to refer to specific parts of the pattern. These were top-level Groups, where Groups were noted as being a fundamental component of a pattern right above individual Bullets themselves. This terminology can be a little confusing, but it will provide one way of thinking about the components of a danmaku pattern - that of patterns as being of a tree structure.</p>
	      <p>In this tree structure, which we must emphasize is only one possible way to conceptualize a danmaku pattern, the entire tree is the pattern, with the trunk forming the core. This trunk is fed by large branches - our Subpatterns. On their own, they are comprised of smaller parts, but together they form the Pattern, which is greater than the sum of its constituent parts. These Subpatterns are further comprised of different groups of bullets, spawned over time as well as in different parts of the playing field. Groups are comprised of smaller groups until we arrive at the smallest groups of all - the leaves of the tree. These are the individual bullets.</p>
	      <p>We can also think of this in the opposite direction. We'll start at the bottom of this hierarchy with Groups. Every Bullet in a Group shares many characteristics - a common relative spawner, similar graphics, angle, speed, etc. Not every bullet in a group must share all of these characteristics, but they typically share many things in common. In addition, Groups can be spacial or temporal in nature when forming larger Groups.</p>
	      <p>A single Bullet can be a Group. However, it is much more common to have a set of Bullets with most aspects in common rather than just a single bullet (though there are some ways in which single Bullets can add significant value to a Pattern). As an example, take a ring of bullets - typically, all members of the ring will have the same speed, graphic, etc, and will only differ in their angle. Alternatively, consider a stack of bullets. Here they have different speeds but otherwise have similar parameters.</p>
	      <p>These smaller groups can be grouped together into larger groups. For example, spawning six rings at the same time with positions relative to a fixed point. Here there are six rings, so we have a group containing six other groups. Alternatively, if five rings are spawned in quick succession with a break, those five rings can also be considered a larger Group. And when these groups are repeated over time, we end up with a Subpattern.</p>
	      <p>We will now discuss the foundational groups, starting with the Ring.</p>
	      <h2 class="ph3tutorialheader" id="sub3">Part 3: Rings and their usage</h2>
	      <p>Rings have a reputation for being incredibly simple and relatively boring. By definition, they are just Groups of bullets spawned at the same time relative to the same Spawner, with a common angle difference between them. Yet rings are capable of so much more than one might expect. We'll go into some crazier Subpatterns in later guides but for now check out AJS's Everlasting Purity script, where every pattern uses Rings for every Subpattern.</p>
	      <div class="ytembed_sm">
	        <iframe src="https://www.youtube.com/embed/YzkecHtaqfI" frameborder="0" allowfullscreen></iframe>
	      </div>
	      <p>Now, the creative aspects of Ring usage, like with any component of a danmaku pattern, depend on usage of Controllers in an effective fashion as well as understanding how to balance the temporal and spacial density and positioning of the rings. Still, even without complex Controllers and simple behavior, rings can be incredibly powerful.</p>
	      <p>Let's first go over the fundamentals of a ring. Every ring starts with a 'seed' angle and a number of components. For the ring to feel like an actual ring, you typically need at least three bullets per ring - any less and there isn't enough to really call a ring. The seed angle can be random, aimed, or fixed - check back to Guide A2 for a refresher if you are unfamiliar. The structure of a ring dictates a common angle between the bullets, so if there are n bullets in the ring, the angle between them will be 360 degrees divided by n bullets. The more bullets are added, the smaller this difference becomes, gradually forming a circle as n goes to infinity.</p>
	      <p>In the following canvas, you can experiment with how many bullets are in a given ring. The default for this example is 3 and the range goes from 1 to 100.</p>
		<div style="text-align:center"><canvas id="gamecanvas_1" width="320" height="320" style="border:1px solid #DDDDDD;"></canvas><br><button type="button" onclick="createNewGame('gamecanvas_1', 'n-rings');">Run Danmakanvas</button></div>
		<div style="background: #202020; outline: none; text-align:center;">
		  <input type="range" min="1" max="100" value="3" style="background: #4CAF50; width: 100%" id="canvas1n">
		  <p id="canvas1nvalue">Number of Bullets in Ring: </p>
		</div>
	      <p>For the sake of terminology, we will refer to a ring with n bullets as an n-ring regardless of where it is spawned.</p>
	      <p>Now that we've covered the basic definition, we'll talk about some more ways you can spawn rings spatially. We will cover temporal changes in Guide A5 where we will discuss ring-based patterns such as spirals and BoWaP, so for now we will limit ourselves to spacial changes.</p>
	      <p>First, we'll demonstrate a Subpattern where there are two primary Groups, one per direction. There are two Spawners which are moving away from the center. Each Spawner plants a ring of Bullets at a set interval.</p>
		<div style="text-align:center"><canvas id="gamecanvas_2" width="480" height="480" style="border:1px solid #DDDDDD;"></canvas><br><button type="button" onclick="createNewGame('gamecanvas_2', 'Distance Offset');">Run Danmakanvas</button><br><button type="button" onclick="Single_2_SetMode('FIXED')">Fixed Angle</button><button type="button" onclick="Single_2_SetMode('RANDOM')">Random Angle</button><button type="button" onclick="Single_2_SetMode('CHANGING')">Changing Angle</button><button type="button" onclick="Single_2_SetMode('AIMED')">Aimed Angle</button></div>
	      <p>This example has four angle settings - Fixed (Default, Green), Random (Orange), Changing (Purple), and Aimed (Blue). These show some of the ways in which the firing angle can change over time. This example does changes symmetrically for the Changing mode, with a change of 1.5 degrees per ring. Note that this example has acceleration to clear the screen faster.</p>
	      <p>In the Fixed setting, we are effectively firing a static ring multiple times, just at a different location. Note how this creates 'lines' of a sort, except that the lines are offset by time as well as space. That's not a line a player can graze! This kind of technique can be put to good use, as seen in the clip from Subterranean Extra below where stage enemies enter the screen and stop moving. The opening is a little rough-looking since the bullets are not aligned, but the fact that the angles are fixed allows for the pattern to proceed at a high speed.</p>
	      <div>
	        <iframe width="560" height="315" src="https://www.youtube.com/embed/sqfhyd0V08E?start=115" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
	      </div>
	      <p>Random angles, in contrast, are not particularly wonderful at first. Even though the pattern formed above is symmetric, it is disorderly and particularly hard to dodge. However, that does not mean that this is a bad thing at all - they just don't work well for this particular example - something that is actually quite widely applicable when designing danmaku patterns. After all, a technique does not have to be useful for one kind of pattern in order to be useful for a different kind of pattern. The more techniques you know, the more flexibly you will be able to design patterns.</p>
	      <p>Next is the changing angle. Every ring, the angle of the ring changes by a fixed amount. This results in predictable ring patterns that form spirals of a sort. As mentioned prior, we will go into further detail with this technique in Guide A5.</p>
	      <p>Finally we have the aimed angle. One bullet per ring aims at the player, and due to the moving Spawner, the overall angle of the ring shifts by a different amount each time. For a clearer example of how this works, refer to the following, which has a larger bullet per 'ring' to denote the overall angle to the player. This example shows bullet trails, and uses a wide canvas to show the overall trajectories. Note that the player is stationary in this example - it's possible to track the player over time instead, but it is also possible to track the player once and use that angle for the duration of the pattern. Both of these techniques are useful in different types of patterns.</p>
		<div style="text-align:center"><canvas id="gamecanvas_3" width="640" height="480" style="border:1px solid #DDDDDD;"></canvas><br><button type="button" onclick="createNewGame('gamecanvas_3', 'Angle to point');">Run Danmakanvas</button></div>
	      <p>With this, we have provided one example of how rings can be fired at positions relative to a static point. We'll now give another example with the same four angle modes as before. This time, we will spawn from four static locations in the corner of the screen.</p>
		<div style="text-align:center"><canvas id="gamecanvas_4" width="480" height="480" style="border:1px solid #DDDDDD;"></canvas><br><button type="button" onclick="createNewGame('gamecanvas_4', 'Static Positions');">Run Danmakanvas</button><br><button type="button" onclick="Single_4_SetMode('FIXED')">Fixed Angle</button><button type="button" onclick="Single_4_SetMode('RANDOM')">Random Angle</button><button type="button" onclick="Single_4_SetMode('CHANGING')">Changing Angle</button><button type="button" onclick="Single_4_SetMode('AIMED')">Aimed Angle</button></div>
	      <p>Note how adding the rings at different locations adds a form of symmetry. This results in a nicer looking Subpattern in general. As for specific notes on the modes, our angle for the Changing mode has been adjusted so that the angle does not divide nicely into 360 degrees. This way, the bullets don't run on the exact same path for a very long time, avoiding the creation of blind spots.</p>
	      <p>The Aimed mode would be more interesting if the player were moving, but that's an exercise for you, the scripter, to try out. Consider both use cases where each ring in sequence aims at the player as well as use cases where the first ring aims at the player but the rings after use that same angle instead of calculating a new one.</p>
	      <p>We'll conclude the ring section by discussing rings offset from the Spawner by a set radius. This is an incredibly popular and powerful technique, especially when combined with an interesting Controller. Advanced versions of this technique often manifest when discussing familiars and will be discussed later in greater detail (as well as in <a href="./ph3u3l28.html">ph3 Tutorials Lesson 28</a>). But for now, a basic definition.</p>
	      <p>Put simply, if our spawner is at (x, y), and we want to spawn bullets at a radius r away, we will spawn our bullets like so: <code>(x + r*cos(360/n), y + r*sin(360/n))</code>, where n is the number of bullets in the ring.</p>
	      <p>We can visualize this like so.</p>
		<div style="text-align:center"><canvas id="gamecanvas_5" width="480" height="480" style="border:1px solid #DDDDDD;"></canvas><br><button type="button" onclick="createNewGame('gamecanvas_5', 'Offset');">Run Danmakanvas</button><br><button type="button" onclick="Single_5_SetMode('FIXED')">Fixed Angle</button><button type="button" onclick="Single_5_SetMode('RANDOM')">Random Angle</button><button type="button" onclick="Single_5_SetMode('CHANGING')">Changing Angle</button><button type="button" onclick="Single_5_SetMode('AIMED')">Aimed Angle</button></div>
		<div style="background: #202020; outline: none; text-align:center;">
		  <input type="range" min="0" max="240" value="64" style="background: #4CAF50; width: 100%" id="canvas5n">
		  <p id="canvas5nvalue">Distance from Center (px): </p>
		</div>
	      <p>Above, in aimed mode, the angle is based off of the location of the Spawner at the center of the screen, as if there were a boss in the center. However, now that the bullets in the rings are no longer based at the spawner's location, it is possible to have them individually aim at the player from their new locations. In the following example, all of the bullets are aimed. Note that the player is now rotating. This is for aesthetic effect in order to showcase how aiming at a target from different locations can create unintended aesthetic effects. Don't see anything interesting with the defaults? Try adjusting the two radii to see what kinds of insights can be extracted from this example. Experiment with the player inside the spawn radius, for example. Spawn Radius of 192 and Player Radius of 128 is a good preset, especially with the changing angle.</p>
		<div style="text-align:center"><canvas id="gamecanvas_6" width="480" height="480" style="border:1px solid #DDDDDD;"></canvas><br><button type="button" onclick="createNewGame('gamecanvas_6', 'Offset + Aiming');">Run Danmakanvas</button><br><button type="button" onclick="Single_6_SetMode('FIXED')">Fixed Angle</button><button type="button" onclick="Single_6_SetMode('RANDOM')">Random Angle</button><button type="button" onclick="Single_6_SetMode('CHANGING')">Changing Angle</button></div>
		<div style="background: #202020; outline: none; text-align:center;">
		  <input type="range" min="0" max="240" value="64" style="background: #4CAF50; width: 100%" id="canvas6sn">
		  <p id="canvas6snvalue">Spawn Distance from Center (px): </p>
		  <input type="range" min="0" max="240" value="128" style="background: #4CAF50; width: 100%" id="canvas6pn">
		  <p id="canvas6pnvalue">Player Distance from Center (px): </p>
		</div>
	      <p>Observe how the player consistently moves and how the pattern has a delay before reaching the player's position. There are many techniques we will cover in the future that make use of this delay. And hopefully, you have come to learn that there are all kinds of techniques that you can employ with simple rings. Take the tools you have learned and apply them to build even more interesting patterns!</p>
	      <h2 class="ph3tutorialheader" id="sub4">Part 4: Bullet Spreads and Walls</h2>
	      <p>In this section, we will cover spreads and walls, two very important formations of bullets.</p>
	      <p>Sometimes, you don't need a ring. Perhaps you just want several bullets in an arc. Just like rings, there is a common angle between them. If you want n of these bullets in an arc, we can call this an n-way spread.</p>
	      <p>Similar to the ring example earlier, experiment with the total angle and number of bullets in the following interactive example.</p>
		<div style="text-align:center"><canvas id="gamecanvas_7" width="320" height="320" style="border:1px solid #DDDDDD;"></canvas><br><button type="button" onclick="createNewGame('gamecanvas_7', 'n-way spread');">Run Danmakanvas</button></div>
		<div style="background: #202020; outline: none; text-align:center;">
		  <input type="range" min="2" max="100" value="3" style="background: #4CAF50; width: 100%" id="canvas7n">
		  <p id="canvas7nvalue">Number of Bullets in Spread: </p>
		  <input type="range" min="0" max="360" value="30" style="background: #4CAF50; width: 100%" id="canvas7arc">
		  <p id="canvas7arcvalue">Arc Angle (Total): </p>
		</div>
	      <p>Similar to with rings, the more bullets, the denser. However, decreasing the arc in which the bullets spawn also increases density. And when the density grows too high, the n-way stack becomes a wall. The typical definition of a wall is any Group or formation of bullets where a player cannot move through the constituent bullets. In terms of danmaku dodging, this introduces the concepts of <strong>micrododging</strong> and <strong>macrododging</strong>. In the former, there is a dense cloud of bullets where the player navigates carefully between bullets. In the latter, there are large formations of bullets where the player cannot move straight through and so the player moves around the objects. A good combination of the two can create dynamic danmaku patterns such as those of Utsuho's spellcards in Subterranean Animism, which combine large suns with waves of smaller bullets.</p>
	      <p>So what can we do with spreads? As before, we can use a variety of angles to fire them. However, the most important when designing danmaku for gameplay comes down to two fundamental types of spreads and the aimed angle.</p>
	      <p>By this, I am referring to streaming. Streaming is possible with consecutively fired aimed rings as well as strings of aimed bullets (as well as stacks, which we will cover next). However, with spreads, there are two different types - spreads with even numbers of bullets and those with odd numbers of bullets.</p>
	      <p>The key difference is that with odd numbers of bullets, the player is trapped and must carefully navigate while with even numbers, <strong>the bullets in the spread all avoid the player.</strong></p>
	        <iframe width="560" height="315" src="https://www.youtube.com/embed/KlWLBB6lYFI?start=743" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
	      <p>In the opening of Mountain of Faith Stage 5 on Lunatic with the Ultra patch, the entire opening pattern avoids the player. Of course this is an Ultra patch so it's not as good of an example for how this technique can be applied practically - good practical examples come from Youmu.</p>
	        <iframe width="560" height="315" src="https://www.youtube.com/embed/qgcICN5DmHY?start=96" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
	      <p>The key to using an even n-way spread is that it provides a set angle range in which the player is trapped <strong>without actually hitting the player</strong>. This forces the player to focus on the range inside and whatever danmaku is utilized to take advantage of that focus on one part of the screen. Note that there is nothing explicitly preventing this from being done with rings, but it is most commonly applied with spreads.</p>
	      <p>On their own, n-way spreads don't do much more in isolation. However, we will now discuss stacks, where n-way spreads truly shine.</p>
	      <h2 class="ph3tutorialheader" id="sub5">Part 5: Stacks and their usage</h2>
	      <p>The concept of a stack is simple. Instead of firing a single bullet with a given angle and a single speed, you fire multiple bullets with that same angle at the same time. The catch is that each has a different speed - typically a speed offset between the bullets in the stack.</p>
	      <p>We will define an n-stack as being a Group of Bullets with the same angle, Spawner and spawn point, and Controller where the bullets have speeds evenly spread out between a minimum velocity and a maximum velocity. Try out the example below. Note that the angles are adjusted to better show each stack.</p>
		<div style="text-align:center"><canvas id="gamecanvas_8" width="320" height="320" style="border:1px solid #DDDDDD;"></canvas><br><button type="button" onclick="createNewGame('gamecanvas_8', 'n-stack');">Run Danmakanvas</button></div>
		<div style="background: #202020; outline: none; text-align:center;">
		  <input type="range" min="2" max="50" value="3" style="background: #4CAF50; width: 100%" id="canvas8n">
		  <p id="canvas8nvalue">Number of Bullets in Stack: </p>
		  <input type="range" min="0.25" max="8" value="2" step="0.25" style="background: #4CAF50; width: 100%" id="canvas8min">
		  <p id="canvas8minvalue">Minimum Speed: </p>
		  <input type="range" min="0.25" max="8" value="5" step="0.25" style="background: #4CAF50; width: 100%" id="canvas8max">
		  <p id="canvas8maxvalue">Maximum Speed: </p>
		</div>
	      <p>Try setting the bullet count to be very high. What do you notice? How about having a large difference between the two speeds? A small difference?</p>
	      <p>Long walls perfect for streaming and lines of bullets allowing for micrododging are both possible with stacks. But of course, the real power comes when combining the fundamental groups together into larger groups.</p>
	      <p>We will first consider stacks of rings, and then stacks of spreads. We will close by combining everything we've covered in this guide.</p>
	      <p>TODO</p>
	      <p></p>
	      <h2 class="ph3tutorialheader" id="subf">Sources and External Resources</h2>
	      <br>            </div>          </div>
          <div class="tutnavbar">
	    <ul>
	      <li><a href="./ddsga2.html" title="Danmaku and the Player - Aesthetics and Gameplay">Guide A2</a></li>
	      <li><span>Navigation Bar</span></li>
	      <li><span>---</span></li>
	    </ul>
	    <br>
          </div>      <footer id="footer">      </footer>    </div>
    <script type="text/javascript" src="javascript/ph3tutorialcommon.js"></script>
    <link href="customhighlighter/desert.css" type="text/css" rel="stylesheet" />
    <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>
    <script type="text/javascript" src="./dds_danmakanvas/Danmakanvas.js"></script>
    <script type="text/javascript" src="./dds_danmakanvas/DDSG3.js"></script>  </body></html>